(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{408:function(a,t,r){"use strict";r.r(t);var s=r(54),_=Object(s.a)({},(function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h1",{attrs:{id:"使用wireshark实时分析安卓手机的包"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用wireshark实时分析安卓手机的包"}},[a._v("#")]),a._v(" 使用Wireshark实时分析安卓手机的包")]),a._v(" "),r("h2",{attrs:{id:"_0x0-前言"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0x0-前言"}},[a._v("#")]),a._v(" 0x0 前言")]),a._v(" "),r("h3",{attrs:{id:"_0x01-环境"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0x01-环境"}},[a._v("#")]),a._v(" 0x01 环境")]),a._v(" "),r("ul",[r("li",[a._v("root了的安卓手机，系统版本影响不大，但最好AOSP")]),a._v(" "),r("li",[a._v("最好Linux的PC机，Windows应该也可但不在讨论范围内。装好wireshark")]),a._v(" "),r("li",[a._v("一根USB线")])]),a._v(" "),r("h3",{attrs:{id:"_0x02-思路"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0x02-思路"}},[a._v("#")]),a._v(" 0x02 思路")]),a._v(" "),r("p",[a._v("手机和电脑USB线连接，作为通信桥梁。")]),a._v(" "),r("p",[a._v("手机同时开启adb与USB网络共享")]),a._v(" "),r("p",[a._v("手机端tcpdump抓的包管道给nc，nc通过USB网络共享发给电脑端的nc，电脑端的nc管道给wireshark")]),a._v(" "),r("h3",{attrs:{id:"_0x03-效果"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0x03-效果"}},[a._v("#")]),a._v(" 0x03 效果")]),a._v(" "),r("p",[a._v("可以不受手机端网路环境变化，稳定的抓包并在电脑的wireshark中高效分析")]),a._v(" "),r("h2",{attrs:{id:"_0x1-步骤"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0x1-步骤"}},[a._v("#")]),a._v(" 0x1 步骤")]),a._v(" "),r("h3",{attrs:{id:"_0x11-env"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0x11-env"}},[a._v("#")]),a._v(" 0x11 ENV")]),a._v(" "),r("p",[a._v("手机USB连接电脑，先开启USB网络共享，再去开发者选项里启用ADB。电脑自备adb工具，执行"),r("code",[a._v("adb shell")]),a._v("连接到手机。")]),a._v(" "),r("p",[a._v("进入adb shell后，输入"),r("code",[a._v("su")]),a._v("提权。手机上的su管理器大概要弹窗确认以下。")]),a._v(" "),r("p",[a._v("手机上"),r("code",[a._v("ifconfig")]),a._v("瞅瞅网络接口名称。含有"),r("code",[a._v("wlan")]),a._v("的基本是手机wifi，含有"),r("code",[a._v("rmnet")]),a._v("的基本是数据流量（安卓10）。")]),a._v(" "),r("p",[a._v("再在电脑上"),r("code",[a._v("ifconfig")]),a._v("或者"),r("code",[a._v("ip addr")]),a._v("。一般含有"),r("code",[a._v("usb")]),a._v("的就是共享过来的网络了。")]),a._v(" "),r("p",[a._v("去手机adb里ping一下电脑usb啥啥啥的ip。如果通了那就莫得问题。")]),a._v(" "),r("h3",{attrs:{id:"_0x12-电脑开始监听"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0x12-电脑开始监听"}},[a._v("#")]),a._v(" 0x12 电脑开始监听")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v("nc -lp 2345 | wireshark -k -S -i -\n")])])]),r("h3",{attrs:{id:"_0x13-手机端开始抓包"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0x13-手机端开始抓包"}},[a._v("#")]),a._v(" 0x13 手机端开始抓包")]),a._v(" "),r("p",[a._v("adb里执行（换成正确的ip，来自之前查看的usb相关网口）")]),a._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[a._v("tcpdump -s 0 -U -n -w - -i wlan0 | nc 192.168.42.168 2345\n")])])]),r("h3",{attrs:{id:"_0x14-结束"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0x14-结束"}},[a._v("#")]),a._v(" 0x14 结束")]),a._v(" "),r("p",[a._v("0x13中新开的wireshark界面里应该已经有数据了。")]),a._v(" "),r("h1",{attrs:{id:"_0xf-参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_0xf-参考"}},[a._v("#")]),a._v(" 0xf 参考")]),a._v(" "),r("p",[r("a",{attrs:{href:"https://eos.arista.com/forward-tcpdump-to-wireshark/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://eos.arista.com/forward-tcpdump-to-wireshark/"),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=_.exports}}]);